@inherits Umbraco.Web.Mvc.UmbracoViewPage<vmBlock_DataFormBuilder>
@using System.Web.Mvc.Html
@using Umbraco.Web
@using Umbraco.Web.Controllers

@{
    if (!Umbraco.MemberIsLoggedOn())
    {
        Func<object> login = () =>
        {
            if (Html.ValidationSummary() != null)
            {
                Model.Validation = new vmSub_DataFormBuilderValidation() { Message = Html.ValidationSummary().ToString() };
            }

            return Model;
        };

        using (Html.BeginUmbracoForm<UmbLoginController>("HandleLogin", FormMethod.Post, new Dictionary<string, object>() { { "novalidate", "" } }))
        {

            @Html.RenderFETemplate(new RenderSettings() { Template = "parAccountForm", Data = login, ShowJson = false })
        }
    }
}


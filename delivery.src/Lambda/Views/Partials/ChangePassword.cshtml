@inherits Umbraco.Web.Mvc.UmbracoViewPage<vmBlock_DataFormBuilder>

@using System.Web.Mvc.Html
@using Umbraco.Web
@using MRC.Code

@{

    if (Model != null)
    {
        Func<object> login = () =>
        {
            if (Html.ValidationSummary() != null)
            {
                Model.Validation = new vmSub_DataFormBuilderValidation() { Message = Html.ValidationSummary().ToString() };
            }
            return Model;
        };

        using (Html.BeginUmbracoForm<MemberController>("HandleChangePassword", FormMethod.Post, new Dictionary<string, object>() { { "novalidate", "" } }))
        {
            @Html.AntiForgeryToken()
            @Html.RenderFETemplate(new RenderSettings() { Template = "parAccountForm", Data = login, ShowJson = false })

            <input type="hidden" name="changePasswordVm.UserKey" value="@Request.QueryString["id"]"/>
        }
    }
}

